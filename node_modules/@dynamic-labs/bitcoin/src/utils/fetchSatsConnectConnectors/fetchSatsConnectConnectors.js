'use client'
import '../../../_virtual/_tslib.js';
import 'sats-connect';
import '@dynamic-labs/wallet-connector-core';
import '@dynamic-labs/wallet-book';
import '@dynamic-labs/utils';
import '@dynamic-labs/sdk-api-core';
import '@wallet-standard/app';
import { SATSCONNECT_FEATURE } from '../../const.js';
import 'bitcoinjs-lib';
import { BitcoinSatsConnectConnector } from '../../connectors/BitcoinSatsConnectConnector/BitcoinSatsConnectConnector.js';
import 'jsontokens';

const fetchSatsConnectConnectors = ({ walletBook, }) => {
    var _a;
    return Object.entries((_a = walletBook === null || walletBook === void 0 ? void 0 : walletBook.wallets) !== null && _a !== void 0 ? _a : {})
        // eslint-disable-next-line @typescript-eslint/no-unused-vars
        .filter(([_, wallet]) => {
        var _a;
        return (_a = wallet.injectedConfig) === null || _a === void 0 ? void 0 : _a.find((config) => {
            var _a, _b;
            return config.chain === 'btc' &&
                ((_a = config.walletStandard) === null || _a === void 0 ? void 0 : _a.features.includes(SATSCONNECT_FEATURE)) &&
                ((_b = config.walletStandard) === null || _b === void 0 ? void 0 : _b.providerId);
        });
    })
        .map(([key, wallet]) => {
        const { shortName } = wallet;
        const name = shortName || wallet.name;
        return class extends BitcoinSatsConnectConnector {
            constructor(props) {
                super(Object.assign(Object.assign({}, props), { overrideKey: key, walletData: wallet }));
                this.name = name;
            }
        };
    });
};

export { fetchSatsConnectConnectors };
